<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>Projet : Transférer des photos via Python - Documentations</title><meta name="description" content="ProblématiqueJ'ai toujours essayé de développer des petits projets perso mais au final, ils n'aboutissaient que très rarement. J'ai lu un&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://blog.victorprouff.fr/projet-transferer-des-photos-via-python.html"><link rel="alternate" type="application/atom+xml" href="https://blog.victorprouff.fr/feed.xml"><link rel="alternate" type="application/json" href="https://blog.victorprouff.fr/feed.json"><meta property="og:title" content="Projet : Transférer des photos via Python"><meta property="og:site_name" content="Documentations"><meta property="og:description" content="ProblématiqueJ'ai toujours essayé de développer des petits projets perso mais au final, ils n'aboutissaient que très rarement. J'ai lu un&hellip;"><meta property="og:url" content="https://blog.victorprouff.fr/projet-transferer-des-photos-via-python.html"><meta property="og:type" content="article"><style>:root{--primary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--secondary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://blog.victorprouff.fr/assets/css/fontawesome-all.min.css?v=bbcde81f26378440dac4c3d195714389"><link rel="stylesheet" href="https://blog.victorprouff.fr/assets/css/style.css?v=cf3d753ba0e70adcf47f65f07222071c"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.victorprouff.fr/projet-transferer-des-photos-via-python.html"},"headline":"Projet : Transférer des photos via Python","datePublished":"2020-10-14T19:13","dateModified":"2020-10-17T12:49","description":"ProblématiqueJ'ai toujours essayé de développer des petits projets perso mais au final, ils n'aboutissaient que très rarement. J'ai lu un&hellip;","author":{"@type":"Person","name":"Victor Prouff"},"publisher":{"@type":"Organization","name":"Victor Prouff"}}</script></head><body class="is-preload"><div id="wrapper"><div id="main"><div class="inner"><header id="header"><a class="logo" href="https://blog.victorprouff.fr/"><strong>Documentations</strong></a></header><article class="post"><header class="main post__header"><time datetime="2020-10-14T19:13" class="post__date">octobre 14, 2020</time><h1>Projet : Transférer des photos via Python</h1></header><div class="post__inner post__entry"><h2 id="probl%C3%A9matique" class="code-line" data-line="2">Problématique</h2><p data-line="4">J'ai toujours essayé de développer des petits projets perso mais au final, ils n'aboutissaient que très rarement. J'ai lu un article de <a href="https://www.jesuisundev.com/projet-perso/" target="_blank" rel="noopener noreferrer">Je suis un dev</a> qui était fort intéressant. Je vous encourage à le lire et surtout à le suivre.<br><br>Mais en gros il dit que pour faire un projet perso, découvrir une techno ou un concept, bref, pour coder après notre journée de taf, il fallait trouver un projet qui nous bottait vraiment. Trouver un truc en lien avec une passion. Qui soit utile, pratique, rigolo, qui nous rende service. Un truc pas trop gros mais intéressant.</p><p class="code-line" data-line="7">Je galère à trouver la plus part du temps. Mais, l'autre jour je me suis trouvé un petit projet tout con .. mais qui aurait une vrai utilité dans mon utilisation quotidienne.</p><p class="code-line" data-line="9">En tant que photographe (amateur) une opération que je fais à chaque fin de shoot c'est le déchargement de mes photos sur l'ordi puis sur mon NAS. La gestion et la sauvegarde des photos et primordiale et demande une certaine organisation si on ne veut pas perdre de photos ou se retrouver noyé dans un bordel sans nom avec des photos éparpillé partout...</p><h2 id="d%C3%A9tails-de-mon-process-de-d%C3%A9chargement-photos" class="code-line" data-line="11">Détails de mon processus de déchargement photos</h2><p class="code-line" data-line="13">Après un shoot quand je rentre chez moi, je procède comme suit :</p><ul><li class="code-line" data-line="14">Je branche la carte SD au PC</li><li class="code-line" data-line="15">Je copie les photos prises dans un répertoire par date de prise de vue</li><li class="code-line" data-line="16">Une fois que je me suis assuré du transfert, je supprime la carte (en général, j'attends plusieurs jours histoire d'avoir un backup)</li></ul><p class="code-line" data-line="18">L'étape la plus "complexe" et chiante c'est la deuxième. Il faut rassembler les photos par dates (il m'arrive de décharger mes photos qu'après 2-3 shoot quand je pars en weekend ou en vacances) et les mettre dans un même dossier nommé à partir de la date de la prise de vue (2020-10-14). Je peux rajouter un titre court qui résume la session photo (exemple : 2020-10-14 Chat). Ça peut prendre un peu de temps, entre les transferts entre la carte et le pc, rassembler les photos d'une même date dans le même dossier etc.</p><h2 id="solution" class="code-line" data-line="21">Solution</h2><p class="code-line" data-line="23">Et .. et si je pouvais pas automatiser tout ça ? De quoi ai je besoin ?</p><ul><li class="code-line" data-line="25">Un programme qui lise les fichiers</li><li class="code-line" data-line="26">Récupérer la date de prise de vue</li><li class="code-line" data-line="27">Les rassembler par date</li><li class="code-line" data-line="28">Déplacer des fichiers groupe par groupe et les placer dans un répertoire avec comme nom la date</li></ul><p class="code-line" data-line="30">Bref. Rien de bien foufou.</p><p class="code-line" data-line="32">Etant développeur backend, j'utilise au quotidien du C# .net... ça fait un peu sortir la grosse artillerie pour pas grand chose. Par contre, m'essayer au python me tente depuis un petit moment. Je n'avais jamais trop prit le temps de me lancer et je me dis que c'est l'occasion.</p><p class="code-line" data-line="34">J'ai commencé par faire plusieurs tests pour comprendre le langage et tester individuellement les différentes briques de mon projet.</p><p class="code-line" data-line="36">Voila le résultat. Soyez indulgent, je maîtrise par encore le langage ^^ D'ailleurs, si vous avez des suggestions ou remarques constructives, je suis preneur :)</p><p class="code-line" data-line="38">Fichier DeletePictures.py :</p><div><pre>import datetime<br>import os.path<br>import shutil<br>import sys<br>from os import scandir<br>from pathlib import Path<br>from modeles.File import File<br><br>originRepository = ""<br>destinationRepository = ""<br>lstFiles = []<br><br>def CopyFiles(files):<br>    currentDate = ""<br>    nbDirectoryCreated = 0<br><br>    for file in files:<br>        if file.date != currentDate:<br>            currentDate = file.date<br>        directoryPath = destinationRepository + "/" + currentDate.strftime("%Y-%m-%d")<br>        fileObj = Path(directoryPath)<br><br>        if fileObj.is_dir() == False:<br>            os.mkdir(directoryPath)<br>            print("Dossier créé : %s" %(directoryPath))<br>            nbDirectoryCreated += 1<br>            pass<br><br>        shutil.copy(file.path, directoryPath)<br>        pass<br>    return nbDirectoryCreated<br><br>def ListAndSortedFilesByPath(path):<br>    for entry in scandir(path):<br>        if entry.is_file() :<br>            lstFiles.append(File(entry.name, entry.path,datetime.date.fromtimestamp(os.path.getmtime(entry.path))))<br>            pass<br><br>    return sorted(lstFiles, key=lambda file: file.date, reverse=True)<br><br>filesSortedByDate = ListAndSortedFilesByPath(originRepository)<br>print("Le répertoire contient %s fichiers \n" %(len(filesSortedByDate)))<br>result = CopyFiles(filesSortedByDate)<br><br>input("\n%s dossiers ont été créé." %(result))</pre></div><p class="code-line" data-line="92">Fichier <code>File.py</code> :</p><div><pre><code>class File:</code><br><code>    filesCount = 0</code><br><code>    def __init__(self, name, path, date):</code><br><code>        self.name = name</code><br><code>        self.path = path</code><br><code>        self.date = date</code><br><code>        self.filesCount += 1</code></pre></div><p class="code-line" data-line="103">Actuellement, deux problèmes me chagrinent avec ce script :</p><ul><li class="code-line" data-line="104">Il est en un bloc. J'aimerai bien déplacer mes deux fonctions dans un fichier séparé comme j'ai pu le faire avec File.</li><li class="code-line" data-line="105">J'aimerai bien mettre mes paths dans un fichier de configuration mais là pareil, c'est la merde. Jusqu'à présent pas moyen.</li></ul><p class="code-line" data-line="107">Faut que je creuse.</p></div><footer class="post__inner post__footer"><p class="post__last-updated">This article was updated on octobre 17, 2020</p><div class="post__share"><h3>Share post:</h3></div><div class="post__tag"><ul><li><strong>Tagged in:</strong></li><li><a href="https://blog.victorprouff.fr/dev/">Dev</a></li><li><a href="https://blog.victorprouff.fr/projet/">Projet</a></li><li><a href="https://blog.victorprouff.fr/python/">Python</a></li></ul></div><div class="post__bio"><div><h3><a href="https://blog.victorprouff.fr/authors/victor-prouff/" class="invert" rel="author">Victor Prouff</a></h3></div></div></footer></article></div></div><div id="sidebar"><div class="inner"><nav id="menu"><header class="major"><h2>Menu</h2></header><ul><li class="active-parent has-submenu"><a href="https://blog.victorprouff.fr/projet/" target="_self" aria-haspopup="true" class="opener">Projets</a><ul class="submenu level-2" aria-hidden="true"><li class="active"><a href="https://blog.victorprouff.fr/projet-transferer-des-photos-via-python.html" target="_self">Transférer des photos via Python</a></li></ul></li></ul></nav><footer id="footer"><p class="copyright">© Victor Prouff - Tous droits réservés<br>Design by: Victor Prouff, Powered by <a href="https://getpublii.com" target="_blank" rel="noopener">Publii</a></p></footer></div></div></div><script src="https://blog.victorprouff.fr/assets/js/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae"></script><script src="https://blog.victorprouff.fr/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://blog.victorprouff.fr/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://blog.victorprouff.fr/assets/js/util.min.js?v=cbdaf7c20ac2883c77ae23acfbabd47e"></script><script src="https://blog.victorprouff.fr/assets/js/main.min.js?v=448f4c9d4b4c374766a1cb76c3d88048"></script><script>var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};</script></body></html>